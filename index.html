<!DOCTYPE html>
<html>
<head>
    <title>Wifi Image Transfer</title>
</head>

<body>
    <h2>Select image to send</h2>
    <input type="file" id="fileInput" accept="image/*">
    <button onclick="sendImage()">Send</button>

    <script>
        const params = new URLSearchParams(window.location.search);
        const ip = params.get("ip");
        const port = params.get("port");

        let ws = new WebSocket(`ws://${ip}:${port}/upload`);

        ws.onopen = () => alert("Connected to PC");
        ws.onerror = () => alert("Connection failed");

        async function sendImage() {
            const file = document.getElementById('fileInput').files[0];
            if (!file) return;

            let arrayBuffer = await file.arrayBuffer();
            ws.send(arrayBuffer);

            alert("Sent successfully");
        }
    </script>
</body>
</html>
